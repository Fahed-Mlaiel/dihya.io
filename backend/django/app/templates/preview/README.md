# ğŸ‘ï¸ Dihya â€“ Preview Templates

---

## ğŸ‡«ğŸ‡· PrÃ©sentation

Ce dossier contient les templates HTML du module **preview** de Dihya (prÃ©visualisation de contenus, assets, mÃ©dias, documents, etc.).
Ils sont conÃ§us pour garantirâ€¯: sÃ©curitÃ©, accessibilitÃ©, confidentialitÃ©, souverainetÃ© numÃ©rique, conformitÃ© preview (RGPD, droits dâ€™auteur, accessibilitÃ©), internationalisation, SEO, modularitÃ©, compatibilitÃ© multi-stack.

- **Stack compatible**â€¯: Django, Jinja2, moteurs alternatifs, IA open source, preview souverain, watermarking, audit, fallback IA.
- **SÃ©curitÃ©**â€¯: Pas de donnÃ©es personnelles, information sensible, ou secret preview, pas de scripts inline, conformitÃ© RGPD/vie privÃ©e, gestion droits preview.
- **AccessibilitÃ©**â€¯: RGAA/WCAG, navigation clavier/tactile, ARIA, responsive, contrastes.
- **i18n**â€¯: Prise en charge multilingue (franÃ§ais, anglais, arabe, amazigh).
- **SEO**â€¯: Balises meta, titres, descriptions, donnÃ©es structurÃ©es.
- **RÃ´les**â€¯: Gestion dynamique des rÃ´les utilisateur (lecteur, Ã©diteur, admin, invitÃ©â€¦).
- **Tests**â€¯: Couverture automatique (lint, accessibilitÃ©, rendu, conformitÃ© preview).
- **SouverainetÃ©**â€¯: Aucun appel Ã  des ressources externes non souveraines, preview souverain uniquement, conformitÃ© RGPD, mentions lÃ©gales.

---

## ğŸ‡¬ğŸ‡§ Overview

This folder contains the **preview** module HTML templates for Dihya (content, asset, media, document preview, etc.).
Designed forâ€¯: security, accessibility, privacy, digital sovereignty, preview compliance (GDPR, copyright, accessibility), i18n, SEO, modularity, multi-stack compatibility.

- **Stack compatible**: Django, Jinja2, alternative engines, open source AI, sovereign preview, watermarking, audit, fallback AI.
- **Security**: No personal data, sensitive info, or preview secrets, no inline scripts, GDPR/privacy compliant, preview rights management.
- **Accessibility**: RGAA/WCAG, keyboard/touch nav, ARIA, responsive, contrast.
- **i18n**: Multilingual support (French, English, Arabic, Amazigh).
- **SEO**: Meta tags, titles, descriptions, structured data.
- **Roles**: Dynamic user role management (reader, editor, admin, guestâ€¦).
- **Tests**: Automatic coverage (lint, accessibility, rendering, preview compliance).
- **Sovereignty**: No calls to non-sovereign external resources, only sovereign preview, GDPR compliance, legal notices.

---

## ğŸ‡¦ğŸ‡ª Ù…Ù‚Ø¯Ù…Ø©

ÙŠØ­ØªÙˆÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø¹Ù„Ù‰ Ù‚ÙˆØ§Ù„Ø¨ HTML Ù„ÙˆØ­Ø¯Ø© "Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©" ÙÙŠ Ø¯ÙŠÙ‡ÙŠØ§ (Ù…Ø¹Ø§ÙŠÙ†Ø© Ù…Ø­ØªÙˆÙ‰ØŒ ÙˆØ³Ø§Ø¦Ø·ØŒ Ù…Ø³ØªÙ†Ø¯Ø§Øª...).
Ù…ØµÙ…Ù…Ø© Ù„Ù„Ø£Ù…Ø§Ù†ØŒ Ø§Ù„Ø®ØµÙˆØµÙŠØ©ØŒ Ø§Ù„ÙˆØµÙˆÙ„ØŒ Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©ØŒ Ø§Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© (RGPDØŒ Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù†Ø´Ø±ØŒ Ø§Ù„ÙˆØµÙˆÙ„)ØŒ Ø§Ù„ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„ØºÙˆÙŠØŒ ØªØ­Ø³ÙŠÙ† Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø«ØŒ Ø§Ù„ØªÙ…Ø¯Ø¯ØŒ Ø§Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø¹Ø¯Ø© ØªÙ‚Ù†ÙŠØ§Øª.

- **Ø§Ù„ØªÙˆØ§ÙÙ‚**: DjangoØŒ Jinja2ØŒ Ù…Ø­Ø±ÙƒØ§Øª Ø£Ø®Ø±Ù‰ØŒ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ÙØªÙˆØ­ Ø§Ù„Ù…ØµØ¯Ø±ØŒ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø³ÙŠØ§Ø¯ÙŠØ©ØŒ ÙˆØ³Ù… Ù…Ø§Ø¦ÙŠØŒ ØªØ¯Ù‚ÙŠÙ‚ØŒ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø¯ÙŠÙ„.
- **Ø§Ù„Ø£Ù…Ø§Ù†**: Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª Ø´Ø®ØµÙŠØ© Ø£Ùˆ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ø³Ø§Ø³Ø© Ø£Ùˆ Ø£Ø³Ø±Ø§Ø± Ù…Ø¹Ø§ÙŠÙ†Ø©ØŒ Ù„Ø§ Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª Ø¯Ø§Ø®Ù„ÙŠØ©ØŒ Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ GDPR/Ø®ØµÙˆØµÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŒ Ø¥Ø¯Ø§Ø±Ø© Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©.
- **Ø§Ù„ÙˆØµÙˆÙ„**: Ù…Ø¹Ø§ÙŠÙŠØ± RGAA/WCAGØŒ Ø¯Ø¹Ù… Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­/Ø§Ù„Ù„Ù…Ø³ØŒ ARIAØŒ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„ØªØµÙ…ÙŠÙ…ØŒ ØªØ¨Ø§ÙŠÙ†.
- **ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„ØºØ§Øª**: Ø¯Ø¹Ù… Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©ØŒ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©ØŒ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŒ Ø§Ù„Ø£Ù…Ø§Ø²ÙŠØºÙŠØ©.
- **SEO**: ÙˆØ³ÙˆÙ… metaØŒ Ø¹Ù†Ø§ÙˆÙŠÙ†ØŒ Ø£ÙˆØµØ§ÙØŒ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù†Ø¸Ù…Ø©.
- **Ø§Ù„Ø£Ø¯ÙˆØ§Ø±**: Ø¥Ø¯Ø§Ø±Ø© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© Ù„Ù„Ø£Ø¯ÙˆØ§Ø± (Ù‚Ø§Ø±Ø¦ØŒ Ù…Ø­Ø±Ø±ØŒ Ù…Ø´Ø±ÙØŒ Ø²Ø§Ø¦Ø±...).
- **Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª**: ØªØºØ·ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© (lintØŒ ÙˆØµÙˆÙ„ØŒ Ø¹Ø±Ø¶ØŒ ØªÙˆØ§ÙÙ‚ Ù…Ø¹Ø§ÙŠÙ†Ø©).
- **Ø§Ù„Ø³ÙŠØ§Ø¯Ø©**: Ù„Ø§ Ù…ÙˆØ§Ø±Ø¯ Ø®Ø§Ø±Ø¬ÙŠØ© ØºÙŠØ± Ø³ÙŠØ§Ø¯ÙŠØ©ØŒ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø³ÙŠØ§Ø¯ÙŠØ© ÙÙ‚Ø·ØŒ ØªÙˆØ§ÙÙ‚ RGPDØŒ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©.

---

## âµœâ´°âµâ´°âµ£âµ‰âµ– â´°âµ™âµâ´¼â´°âµ¡

Asegwas agi yegber templates n HTML n uÎ³mis "preview" n Dihya (tawuri n preview n ugbur, amedya, isefka...).
IÉ£ewwaá¹›en i taÉ£ult, tawuri, uslig, tmedyazt, tawaá¸it n preview, tamyizt, SEO, tmedyazt, amsawal n multi-stack.

- **Tawuri**: Ulac isefka ur nelli d asensi, isefka uslig, neÉ£ asensi n preview, ulac script deg templates.
- **Tawuri n wudem**: RGAA/WCAG, tawuri n tneflit, ARIA, responsive, tawuri n tneflit n preview.
- **Tamyizt**: Tamulti (fr, en, ar, tz).
- **SEO**: Meta, title, description, tags.
- **Isemnisen**: Uselkim n wudem (reader, editor, admin, azayâ€¦).
- **Imtihanen**: Lint, tawuri, uskan, tawaá¸it n preview.
- **Aseggas n tmedyazt**: Ulac tazwara d isemlal ur nelli d n tmurt, preview n tmurt kan, RGPD ilaq ad yili, tazwart n taseddast ilaq ad tili.

---

## ğŸš€ Structure & Bonnes pratiques / Best Practices

- Placez vos fichiers `.html` ici.
- Respectez la [policy.md](./policy.md) pour chaque template.
- Utilisez `{% trans %}` ou `{% blocktrans %}` pour tout texte affichÃ©.
- Ajoutez les balises `<html lang="">`, `<meta>`, `<title>`, ARIA, et attributs dâ€™accessibilitÃ© sur les images.
- Ne jamais afficher dâ€™information preview confidentielle ou de donnÃ©e personnelle.
- Pour chaque nouveau template, ajoutez un test dâ€™accessibilitÃ©, de rendu et de conformitÃ© preview.

---

## ğŸ§© Exemple de template conforme

```django
{# filepath: preview/example.html #}
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}{% trans "AperÃ§u de document" %}{% endblock %}</title>
  <meta name="description" content="{% trans 'PrÃ©visualisation souveraine, conforme RGPD et sÃ©curisÃ©e' %}">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {% block extra_meta %}{% endblock %}
</head>
<body>
  <header>
    <h1>{% trans "PrÃ©visualisation de document" %}</h1>
    {% if user.is_authenticated %}
      <p>{% trans "ConnectÃ© en tant que" %} {{ user.username }}</p>
      {% if user.is_superuser %}
        <span class="role">{% trans "Administrateur" %}</span>
      {% elif user.groups|length > 0 %}
        <span class="role">{% trans "Ã‰diteur" %}</span>
      {% else %}
        <span class="role">{% trans "Lecteur" %}</span>
      {% endif %}
    {% else %}
      <a href="{% url 'login' %}">{% trans "Connexion" %}</a>
    {% endif %}
  </header>
  <main>
    <img src="{% static 'preview/doc.jpg' %}" alt="{% trans 'Document Ã  prÃ©visualiser' %}" />
    {% block content %}{% endblock %}
  </main>
  <footer>
    <small>&copy; 2025 Dihya</small>
    <a href="{% url 'legal_mentions' %}">{% trans "Mentions lÃ©gales" %}</a>
  </footer>
</body>
</html>
```

---

## ğŸ§ª Tests & CI

- Chaque template est vÃ©rifiÃ© automatiquement (lint, accessibilitÃ©, i18n, sÃ©curitÃ©, conformitÃ© preview) via CI/CD.
- Pour lancer les tests localementâ€¯:
  ```bash
  python manage.py test app.tests.test_templates_preview
  ```

---

## ğŸ¤ Contribution

- Toute contribution doit respecter la [policy.md](./policy.md).
- Les PRs non conformes sont refusÃ©es.
- Multilingueâ€¯: tout nouveau texte doit Ãªtre balisÃ© pour la traduction.

---

## ğŸ“š Ressources

- [Django i18n](https://docs.djangoproject.com/fr/stable/topics/i18n/translation/)
- [WCAG](https://www.w3.org/WAI/standards-guidelines/wcag/)
- [RGAA](https://accessibilite.numerique.gouv.fr/methode/criteres/)
- [CNIL RGPD](https://www.cnil.fr/fr/rgpd-de-quoi-parle-t-on)
- [Dihya Docs](../../../../docs/)

---

Â© 2025 Dihya â€“ SouverainetÃ©, sÃ©curitÃ©, accessibilitÃ©, conformitÃ© preview, excellence.
